/*
	SHChat
	(C) 2006-2014 by Scripthosting.net
	http://www.shchat.net

	Free for non-commercial use:
	Licensed under the "Creative Commons 3.0 BY-NC-SA"
	http://creativecommons.org/licenses/by-nc-sa/3.0/
	
	Support-Forum: http://board.scripthosting.net/viewforum.php?f=18
	Don't send emails asking for support!!
*/
function mooRequest(b,g,f,d){var e=new Request({url:b,async:true,method:"get",update:"refresh-me",evalScripts:false,evalResponse:false,onComplete:function(h){if(g!=null&&g!="dummy"){$(g).innerHTML=h}if(h!=""&&h!=null&&h!="undefined"){window.response=h}if(d==true){document.location.href="./"}}});var c=0;do{e.cancel();e.send();c++}while(window.response==null&&g!="dummy"&&c<3);if(f!=null&&parseInt(f)!=0){var a=function(){e.cancel();e.send()};a.periodical(f)}return e}function onStart(){if($("chat")!=null&&$("online")!=null&&$("channel")!=null&&$("chat_content")!=null){if(Browser.name!="ie"||(Browser.name=="ie"&&Browser.version>=9)){$("chat").fade("hide")}t_scrollDown=window.setInterval(function(){if($("autoscroll").checked){scrollDown("chat_content")}},200);t_online=mooRequest("xml/xml.online.php","online",9789);t_channel=mooRequest("xml/xml.channel.php","channel",59889);t_chatContent=mooRequest("xml/xml.content.php","chat_content",3089);if(Browser.name!="ie"||(Browser.name=="ie"&&Browser.version>=9)){$("chat").fade("in")}if($("text")!=null){$("text").focus()}startInactivityTimer()}}function SendData(){url="xml/xml.chatinput.php?";var a=$("text").value;var b="text="+translate_charset(a);$("text").value="";$("text").disabled=true;mooRequest(url+b,"dummy");if(a.substring(0,6)=="/join "||a.substring(0,3)=="/j "||a.substring(0,5)=="/sep "){window.setTimeout("document.location.reload()",100);return false}if(a.substring(0,5)=="/quit"){logout();return false}mooRequest("xml/xml.content.php","chat_content");window.setTimeout(function(){$("text").disabled=false;$("text").focus()},1000);if(a!=""){resetInactivityTimer()}return false}function setsmiley(a){$("text").value=$("text").value+" "+a;$("text").focus();smileys(0)}function whisper(b){var a=$("text").value;if(b.indexOf(" ")==-1){$("text").value="/w "+b+" "+a}else{$("text").value="/w <"+b+"> "+a}$("text").focus()}function whois(a){window.open("index.php?site=whois&user="+a,"whois","width=600,height=500,left=50,top=50,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}function profil(){window.open("index.php?site=profil","profil","width=600,height=500,left=50,top=50,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}function whoisonline(){window.open("index.php?site=whoisonline","whoisonline","width=600,height=500,left=50,top=50,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}function userlist(){window.open("index.php?site=userlist","userlist","width=600,height=500,left=50,top=50,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}function top10(){window.open("index.php?site=top10","top10","width=600,height=500,left=50,top=50,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}function help(){window.open("index.php?site=help","help","width=600,height=500,left=50,top=50,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}function smileys(a){if(a==0){$("smileys").style.display="none"}else{if(a==1){$("smileys").style.display="block"}}}function admin(){window.open("admin.php","admin","width=800,height=600,left=50,top=50,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}function join(a){$("text").value="/join "+a;SendData();$("chat").fade("out")}function scrollDown(a){if($(a).scrollTop!=$(a).scrollHeight){$(a).scrollTop=$(a).scrollHeight}}function scrollUp(a){$(a).scrollTop=0}function logout(){window.clearInterval(t_online);window.clearInterval(t_channel);window.clearInterval(t_chatContent);if($("autoscroll").checked){window.clearInterval(t_scrollDown)}stopInactivityTimer();$("chat").fade("out");document.location.href="./index.php?logout=true"}function startInactivityTimer(){window.t_inactivityTimer=window.setTimeout(function(){$("text").value="/away";SendData();stopInactivityTimer();window.alert("{@Du wurdest wegen Inaktivit√§t in den AWAY-Modus versetzt.}")},600000)}function resetInactivityTimer(){stopInactivityTimer();startInactivityTimer()}function stopInactivityTimer(){if(window.t_inactivityTimer!=null){window.clearTimeout(window.t_inactivityTimer)}};